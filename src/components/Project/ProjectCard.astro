---
const { title, description, technologies, href, imgSrc, imgAlt, techColors } =
  Astro.props;
---

<div
  class="group relative rounded-xl overflow-hidden bg-white dark:bg-gray-800 shadow-lg hover:shadow-2xl transition-all duration-500 hover:-translate-y-2"
>
  <div class="aspect-video overflow-hidden relative">
    <img
      src={imgSrc}
      alt={imgAlt}
      class="object-cover w-full h-full transform transition-transform duration-500 group-hover:scale-110 filter grayscale group-hover:filter-none"
      loading="lazy"
    />
  </div>
  <div class="p-8">
    <h3
      class="text-2xl font-bold text-gray-900 dark:text-white mb-4 group-hover:text-rose-500 transition-colors duration-300"
    >
      {title}
    </h3>
    <p class="text-gray-600 dark:text-gray-300 mb-6 text-lg">
      {description}
    </p>
    <div class="flex flex-wrap gap-3 mb-8 justify-center">
      {
        technologies.map(tech => (
          <span
            class={`tech-tag px-4 py-2 text-sm font-semibold rounded-lg
              transition-all duration-300 ease-in-out
              backdrop-blur-sm bg-opacity-10 hover:bg-opacity-20
              shadow-sm hover:shadow-lg
              transform hover:-translate-y-1
              ${techColors[tech] || 'text-gray-600 dark:text-gray-300 bg-gray-300 dark:bg-gray-600'}`}
          >
            {tech}
          </span>
        ))
      }
    </div>
    <div class="flex justify-center">
      <a
        href={href}
        target="_blank"
        rel="noopener noreferrer"
        class="project-button relative inline-flex items-center"
      >
        <span
          class="button-content relative inline-flex items-center px-6 py-3 text-white rounded-lg bg-rose-500"
        >
          Visit Project
          <svg
            class="w-5 h-5 ml-2 button-arrow"
            viewBox="0 0 20 20"
            fill="currentColor"
          >
            <path
              fill-rule="evenodd"
              d="M10.293 3.293a1 1 0 011.414 0l6 6a1 1 0 010 1.414l-6 6a1 1 0 01-1.414-1.414L14.586 11H3a1 1 0 110-2h11.586l-4.293-4.293a1 1 0 010-1.414z"
              clip-rule="evenodd"></path>
          </svg>
        </span>
        <span
          class="button-shadow absolute inset-0 rounded-lg bg-rose-500 opacity-30"
        ></span>
      </a>
    </div>
  </div>
  <div
    class="absolute inset-0 border-2 border-transparent group-hover:border-rose-500/20 rounded-xl transition-all duration-500"
  >
  </div>
</div>

<style>
  /* Tech Tag Hover Animation */
  .tech-tag {
    position: relative;
    cursor: pointer;
    overflow: hidden;
  }

  .tech-tag::before {
    content: '';
    position: absolute;
    top: -2px;
    left: -2px;
    right: -2px;
    bottom: -2px;
    background: linear-gradient(90deg, transparent, currentColor, transparent);
    opacity: 0;
    transform: translateX(-100%);
    transition: all 0.6s ease;
  }

  .tech-tag:hover::before {
    opacity: 0.2;
    transform: translateX(100%);
  }

  .tech-tag::after {
    content: '';
    position: absolute;
    inset: 0;
    background: currentColor;
    opacity: 0.1;
    transition: opacity 0.3s ease;
  }

  .tech-tag:hover::after {
    opacity: 0.15;
  }

  /* Button Hover Animation */
  .project-button {
    transition: transform 0.3s ease;
  }

  .button-content {
    transition: all 0.3s ease;
    z-index: 1;
  }

  .button-shadow {
    transform: translate(4px, 4px);
    transition: transform 0.3s ease;
  }

  .button-arrow {
    transition: transform 0.3s ease;
  }

  .project-button:hover .button-content {
    transform: translate(2px, 2px);
  }

  .project-button:hover .button-shadow {
    transform: translate(0, 0);
  }

  .project-button:hover .button-arrow {
    transform: translateX(4px);
  }

  /* Add hover shadow effect to button */
  .project-button .button-content {
    box-shadow: 4px 4px 0px 0px rgba(225, 29, 72, 0.4);
  }

  .project-button:hover .button-content {
    box-shadow: 0px 0px 0px 0px rgba(225, 29, 72, 0.4);
  }
</style>
